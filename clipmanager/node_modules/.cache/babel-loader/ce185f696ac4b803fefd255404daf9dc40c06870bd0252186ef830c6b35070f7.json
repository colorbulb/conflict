{"ast":null,"code":"import { collection, addDoc, updateDoc, deleteDoc, doc, query, where, orderBy, onSnapshot, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nconst COLLECTION_NAME = 'clips';\nexport const subscribeToClips = (userId, callback) => {\n  const q = query(collection(db, COLLECTION_NAME), where('userId', '==', userId), orderBy('createdAt', 'desc'));\n  return onSnapshot(q, snapshot => {\n    const clips = [];\n    snapshot.forEach(doc => {\n      var _doc$data$createdAt, _doc$data$updatedAt;\n      clips.push({\n        id: doc.id,\n        ...doc.data(),\n        createdAt: (_doc$data$createdAt = doc.data().createdAt) === null || _doc$data$createdAt === void 0 ? void 0 : _doc$data$createdAt.toDate().toISOString(),\n        updatedAt: (_doc$data$updatedAt = doc.data().updatedAt) === null || _doc$data$updatedAt === void 0 ? void 0 : _doc$data$updatedAt.toDate().toISOString()\n      });\n    });\n    callback(clips);\n  }, error => {\n    console.error('Error fetching clips:', error);\n    if (error.code === 'permission-denied') {\n      alert('Permission denied. Please check Firestore security rules.');\n    }\n  });\n};\nexport const addClip = async (userId, clipData) => {\n  try {\n    const docRef = await addDoc(collection(db, COLLECTION_NAME), {\n      ...clipData,\n      userId,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('Error adding clip:', error);\n    throw error;\n  }\n};\nexport const updateClip = async (clipId, clipData) => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await updateDoc(clipRef, {\n      ...clipData,\n      updatedAt: serverTimestamp()\n    });\n  } catch (error) {\n    console.error('Error updating clip:', error);\n    throw error;\n  }\n};\nexport const deleteClip = async clipId => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await deleteDoc(clipRef);\n  } catch (error) {\n    console.error('Error deleting clip:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["collection","addDoc","updateDoc","deleteDoc","doc","query","where","orderBy","onSnapshot","serverTimestamp","db","COLLECTION_NAME","subscribeToClips","userId","callback","q","snapshot","clips","forEach","_doc$data$createdAt","_doc$data$updatedAt","push","id","data","createdAt","toDate","toISOString","updatedAt","error","console","code","alert","addClip","clipData","docRef","updateClip","clipId","clipRef","deleteClip"],"sources":["/Users/louisc/Downloads/firebase-complete 2/src/services/clipboardService.js"],"sourcesContent":["import {\n  collection,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  doc,\n  query,\n  where,\n  orderBy,\n  onSnapshot,\n  serverTimestamp\n} from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\n\nconst COLLECTION_NAME = 'clips';\n\nexport const subscribeToClips = (userId, callback) => {\n  const q = query(\n    collection(db, COLLECTION_NAME),\n    where('userId', '==', userId),\n    orderBy('createdAt', 'desc')\n  );\n\n  return onSnapshot(q, (snapshot) => {\n    const clips = [];\n    snapshot.forEach((doc) => {\n      clips.push({\n        id: doc.id,\n        ...doc.data(),\n        createdAt: doc.data().createdAt?.toDate().toISOString(),\n        updatedAt: doc.data().updatedAt?.toDate().toISOString()\n      });\n    });\n    callback(clips);\n  }, (error) => {\n    console.error('Error fetching clips:', error);\n    if (error.code === 'permission-denied') {\n      alert('Permission denied. Please check Firestore security rules.');\n    }\n  });\n};\n\nexport const addClip = async (userId, clipData) => {\n  try {\n    const docRef = await addDoc(collection(db, COLLECTION_NAME), {\n      ...clipData,\n      userId,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('Error adding clip:', error);\n    throw error;\n  }\n};\n\nexport const updateClip = async (clipId, clipData) => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await updateDoc(clipRef, {\n      ...clipData,\n      updatedAt: serverTimestamp()\n    });\n  } catch (error) {\n    console.error('Error updating clip:', error);\n    throw error;\n  }\n};\n\nexport const deleteClip = async (clipId) => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await deleteDoc(clipRef);\n  } catch (error) {\n    console.error('Error deleting clip:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}