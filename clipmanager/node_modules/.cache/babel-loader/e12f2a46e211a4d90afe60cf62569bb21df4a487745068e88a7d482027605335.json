{"ast":null,"code":"import _objectSpread from\"/Users/louisc/Desktop/clipmanager/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{collection,addDoc,updateDoc,deleteDoc,doc,query,where,onSnapshot,serverTimestamp}from'firebase/firestore';import{db}from'../firebaseConfig';const COLLECTION_NAME='clips';export const subscribeToClips=(userId,callback)=>{const q=query(collection(db,COLLECTION_NAME),where('userId','==',userId));return onSnapshot(q,snapshot=>{const clips=[];snapshot.forEach(doc=>{var _data$createdAt,_data$updatedAt;const data=doc.data();clips.push(_objectSpread(_objectSpread({id:doc.id},data),{},{createdAt:(_data$createdAt=data.createdAt)!==null&&_data$createdAt!==void 0&&_data$createdAt.toDate?data.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:(_data$updatedAt=data.updatedAt)!==null&&_data$updatedAt!==void 0&&_data$updatedAt.toDate?data.updatedAt.toDate().toISOString():new Date().toISOString()}));});// Sort in memory instead of using Firestore orderBy\nclips.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));callback(clips);},error=>{console.error('Error fetching clips:',error);if(error.code==='permission-denied'){alert('Permission denied. Please check Firestore security rules.');}});};export const addClip=async(userId,clipData)=>{try{const docRef=await addDoc(collection(db,COLLECTION_NAME),_objectSpread(_objectSpread({},clipData),{},{userId,createdAt:serverTimestamp(),updatedAt:serverTimestamp()}));return docRef.id;}catch(error){console.error('Error adding clip:',error);throw error;}};export const updateClip=async(clipId,clipData)=>{try{const clipRef=doc(db,COLLECTION_NAME,clipId);await updateDoc(clipRef,_objectSpread(_objectSpread({},clipData),{},{updatedAt:serverTimestamp()}));}catch(error){console.error('Error updating clip:',error);throw error;}};export const deleteClip=async clipId=>{try{const clipRef=doc(db,COLLECTION_NAME,clipId);await deleteDoc(clipRef);}catch(error){console.error('Error deleting clip:',error);throw error;}};","map":{"version":3,"names":["collection","addDoc","updateDoc","deleteDoc","doc","query","where","onSnapshot","serverTimestamp","db","COLLECTION_NAME","subscribeToClips","userId","callback","q","snapshot","clips","forEach","_data$createdAt","_data$updatedAt","data","push","_objectSpread","id","createdAt","toDate","toISOString","Date","updatedAt","sort","a","b","error","console","code","alert","addClip","clipData","docRef","updateClip","clipId","clipRef","deleteClip"],"sources":["/Users/louisc/Desktop/clipmanager/src/services/clipboardService.js"],"sourcesContent":["import {\n  collection,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  doc,\n  query,\n  where,\n  onSnapshot,\n  serverTimestamp\n} from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\n\nconst COLLECTION_NAME = 'clips';\n\nexport const subscribeToClips = (userId, callback) => {\n  const q = query(\n    collection(db, COLLECTION_NAME),\n    where('userId', '==', userId)\n  );\n\n  return onSnapshot(q, (snapshot) => {\n    const clips = [];\n    snapshot.forEach((doc) => {\n      const data = doc.data();\n      clips.push({\n        id: doc.id,\n        ...data,\n        createdAt: data.createdAt?.toDate ? data.createdAt.toDate().toISOString() : new Date().toISOString(),\n        updatedAt: data.updatedAt?.toDate ? data.updatedAt.toDate().toISOString() : new Date().toISOString()\n      });\n    });\n    \n    // Sort in memory instead of using Firestore orderBy\n    clips.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    \n    callback(clips);\n  }, (error) => {\n    console.error('Error fetching clips:', error);\n    if (error.code === 'permission-denied') {\n      alert('Permission denied. Please check Firestore security rules.');\n    }\n  });\n};\n\nexport const addClip = async (userId, clipData) => {\n  try {\n    const docRef = await addDoc(collection(db, COLLECTION_NAME), {\n      ...clipData,\n      userId,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('Error adding clip:', error);\n    throw error;\n  }\n};\n\nexport const updateClip = async (clipId, clipData) => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await updateDoc(clipRef, {\n      ...clipData,\n      updatedAt: serverTimestamp()\n    });\n  } catch (error) {\n    console.error('Error updating clip:', error);\n    throw error;\n  }\n};\n\nexport const deleteClip = async (clipId) => {\n  try {\n    const clipRef = doc(db, COLLECTION_NAME, clipId);\n    await deleteDoc(clipRef);\n  } catch (error) {\n    console.error('Error deleting clip:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}